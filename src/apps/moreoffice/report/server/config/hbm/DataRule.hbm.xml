<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.yozo.report.commons.domain.databaseObject">
	<class name="DataRule" table="rpt_sys_dataRule">
		<!-- 公共属性 -->
		<id name="id">
			<generator class="native" />
		</id>
		<property name="name">
			<column name="name" length="64" not-null="true">
				<comment>数据规范名称</comment>
			</column>
		</property>
		<property name="type">
			<column name="type" not-null="true">
				<comment>数据规范类型</comment>
			</column>
		</property>
		<property name="allowOthersModify">
			<column name="allowOthersModify">
				<comment>是否允许其他设计者修改</comment>
			</column>
		</property>
		<property name="systemDefined">
			<column name="systemDefined">
				<comment>是否系统预定义</comment>
			</column>
		</property>
		<property name="creatorId">
			<column name="creatorId" not-null="true">
				<comment>创建者ID</comment>
			</column>
		</property>
		<property name="createDate">
			<column name="createDate" not-null="true">
				<comment>创建时间</comment>
			</column>
		</property>
		<property name="modifierId">
			<column name="modifierId">
				<comment>修改者ID</comment>
			</column>
		</property>
		<property name="modifyDate">
			<column name="modifyDate">
				<comment>修改时间</comment>
			</column>
		</property>
		<set name="dataRuleConds" inverse="true" cascade="delete">
			<key>
				<column name="dataRule_id">
					<comment>数据规范条件对象id</comment>
				</column>
			</key>
			<one-to-many class="DataRuleCond" />
		</set>

		<!-- 自动编号 -->
		<joined-subclass name="AutoNumRule" table="rpt_sys_autoNum_rule">
			<key>
				<column name="datarule_id">
					<comment>数据规范id</comment>
				</column>
			</key>
			<property name="format">
				<column name="format">
					<comment>编号格式</comment>
				</column>
			</property>
			<property name="numbers">
				<column name="numbers">
					<comment>顺序号</comment>
				</column>
			</property>
			<property name="attrFlag">
				<column name="attrFlag">
					<comment>基本属性集</comment>
				</column>
			</property>
		</joined-subclass>

		<!-- 下拉列表 -->
		<joined-subclass name="DownListRule" table="rpt_sys_downList_rule">
			<key>
				<column name="dataRule_id">
					<comment>数据规范id</comment>
				</column>
			</key>
			<property name="dataSourceType">
				<column name="dataSourceType">
					<comment>数据源类型</comment>
				</column>
			</property>
			<property name="attrFlag">
				<column name="attrFlag">
					<comment>基本属性集</comment>
				</column>
			</property>
			<property name="fixedValue">
				<column name="fixedValue">
					<comment>固定取值</comment>
				</column>
			</property>
			<many-to-one name="dtable">
				<column name="dtable_id">
					<comment>对应的表id</comment>
				</column>
			</many-to-one>
			<many-to-one name="dfield">
				<column name="dfield_id">
					<comment>对应的字段id</comment>
				</column>
			</many-to-one>
			<many-to-one name="sortField">
				<column name="sortField_id">
					<comment>对应的排序字段id</comment>
				</column>
			</many-to-one>
			<property name="filterCond">
				<column name="filterCond">
					<comment>筛选条件</comment>
				</column>
			</property>
		</joined-subclass>

		<!-- 树型选择 -->
		<joined-subclass name="TreeSelectRule" table="rpt_sys_treeSelect_rule">
			<key>
				<column name="dataRule_id">
					<comment>数据规范id</comment>
				</column>
			</key>
			<property name="dataSourceType">
				<column name="dataSourceType">
					<comment>数据源类型</comment>
				</column>
			</property>
			<property name="attrFlag">
				<column name="attrFlag">
					<comment>基本属性集</comment>
				</column>
			</property>
			<property name="fixedValue">
				<column name="fixedValue">
					<comment>固定取值</comment>
				</column>
			</property>
			<many-to-one name="dtable">
				<column name="dtable_id">
					<comment>对应的表id</comment>
				</column>
			</many-to-one>
			<property name="filterCond">
				<column name="filterCond">
					<comment>筛选条件</comment>
				</column>
			</property>
			<property name="formatType">
				<column name="formatType">
					<comment>构造方式</comment>
				</column>
			</property>
			<set name="levelFields" cascade="all" lazy="false">
				<key>
					<column name="treeSelectRule_id" />
				</key>
				<one-to-many class="LevelField" />
			</set>
			<many-to-one name="codeorPrimaryField">
				<column name="codeorPrimaryField_id">
					<comment>编码或关键字段id</comment>
				</column>
			</many-to-one>
			<many-to-one name="parentPrimaryField">
				<column name="parentPrimaryField_id">
					<comment>父关键字段id</comment>
				</column>
			</many-to-one>
			<many-to-one name="viewField">
				<column name="viewField_id">
					<comment>显示字段id</comment>
				</column>
			</many-to-one>
			<property name="levelNum">
				<column name="levelNum">
					<comment>各级位数</comment>
				</column>
			</property>
			<property name="sortSelect">
				<column name="sortSelect">
					<comment>排序选择</comment>
				</column>
			</property>
			<property name="sortType">
				<column name="sortType">
					<comment>排序类型</comment>
				</column>
			</property>
			<set name="listSelectItems" cascade="delete">
				<key>
					<column name="treeSelectRule_id" />
				</key>
				<one-to-many class="ListSelectItem" />
			</set>
		</joined-subclass>

		<!-- 列表选择 -->
		<joined-subclass name="ListSelectRule" table="rpt_sys_listSelect_rule">
			<key>
				<column name="dataRule_id">
					<comment>数据规范id</comment>
				</column>
			</key>
			<property name="attrFlag">
				<column name="attrFlag">
					<comment>基本属性集</comment>
				</column>
			</property>
			<many-to-one name="dtable">
				<column name="dtable_id">
					<comment>对应的表id</comment>
				</column>
			</many-to-one>
			<property name="filterCond">
				<column name="filterCond">
					<comment>筛选条件</comment>
				</column>
			</property>
			<property name="sortType">
				<column name="sortType">
					<comment>分类</comment>
				</column>
			</property>
			<set name="listSelectItems">
				<key>
					<column name="listSelectRule_id" />
				</key>
				<one-to-many class="ListSelectItem" />
			</set>
		</joined-subclass>
	</class>
</hibernate-mapping>
